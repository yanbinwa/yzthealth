var WeixinApi=function(){"use strict";function e(e,n){n=n||{};var i=function(e){WeixinJSBridge.invoke("shareTimeline",{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.title,title:e.desc,img_width:"640",img_height:"640"},function(e){switch(e.err_msg){case"share_timeline:cancel":n.cancel&&n.cancel(e);break;case"share_timeline:confirm":case"share_timeline:ok":n.confirm&&n.confirm(e);break;case"share_timeline:fail":default:n.fail&&n.fail(e)}n.all&&n.all(e)})};WeixinJSBridge.on("menu:share:timeline",function(a){n.async&&n.ready?(window._wx_loadedCb_=n.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),n.dataLoaded=function(e){window._wx_loadedCb_(e),i(e)},n.ready&&n.ready(a)):(n.ready&&n.ready(a),i(e))})}function n(e,n){n=n||{};var i=function(e){WeixinJSBridge.invoke("sendAppMessage",{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},function(e){switch(e.err_msg){case"send_app_msg:cancel":n.cancel&&n.cancel(e);break;case"send_app_msg:confirm":case"send_app_msg:ok":n.confirm&&n.confirm(e);break;case"send_app_msg:fail":default:n.fail&&n.fail(e)}n.all&&n.all(e)})};WeixinJSBridge.on("menu:share:appmessage",function(a){n.async&&n.ready?(window._wx_loadedCb_=n.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),n.dataLoaded=function(e){window._wx_loadedCb_(e),i(e)},n.ready&&n.ready(a)):(n.ready&&n.ready(a),i(e))})}function i(e,n){n=n||{};var i=function(e){WeixinJSBridge.invoke("shareWeibo",{content:e.desc,url:e.link},function(e){switch(e.err_msg){case"share_weibo:cancel":n.cancel&&n.cancel(e);break;case"share_weibo:confirm":case"share_weibo:ok":n.confirm&&n.confirm(e);break;case"share_weibo:fail":default:n.fail&&n.fail(e)}n.all&&n.all(e)})};WeixinJSBridge.on("menu:share:weibo",function(a){n.async&&n.ready?(window._wx_loadedCb_=n.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),n.dataLoaded=function(e){window._wx_loadedCb_(e),i(e)},n.ready&&n.ready(a)):(n.ready&&n.ready(a),i(e))})}function a(e,n){n=n||{};var i=function(e,i){if("timeline"==e.shareTo){var a=i.title;i.title=i.desc||a,i.desc=a}e.generalShare({appid:i.appId?i.appId:"",img_url:i.imgUrl,link:i.link,desc:i.desc,title:i.title,img_width:"640",img_height:"640"},function(i){switch(i.err_msg){case"general_share:cancel":n.cancel&&n.cancel(i,e.shareTo);break;case"general_share:confirm":case"general_share:ok":n.confirm&&n.confirm(i,e.shareTo);break;case"general_share:fail":default:n.fail&&n.fail(i,e.shareTo)}n.all&&n.all(i,e.shareTo)})};WeixinJSBridge.on("menu:general:share",function(a){n.async&&n.ready?(window._wx_loadedCb_=n.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),n.dataLoaded=function(e){window._wx_loadedCb_(e),i(a,e)},n.ready&&n.ready(a,a.shareTo)):(n.ready&&n.ready(a,a.shareTo),i(a,e))})}function o(e,n){n=n||{},WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e){var i=!e.err_msg||"add_contact:ok"==e.err_msg||"add_contact:added"==e.err_msg;i?n.success&&n.success(e):n.fail&&n.fail(e)})}function t(e,n){e&&n&&0!=n.length&&WeixinJSBridge.invoke("imagePreview",{current:e,urls:n})}function d(){WeixinJSBridge.call("showOptionMenu")}function r(){WeixinJSBridge.call("hideOptionMenu")}function c(){WeixinJSBridge.call("showToolbar")}function l(){WeixinJSBridge.call("hideToolbar")}function s(e){e&&"function"==typeof e&&WeixinJSBridge.invoke("getNetworkType",{},function(n){e(n.err_msg)})}function u(){WeixinJSBridge.call("closeWindow")}function f(e){if(e&&"function"==typeof e){var n=this,i=function(){e(n)};"undefined"==typeof window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}}function h(){return/MicroMessenger/i.test(navigator.userAgent)}return{version:"2.1",ready:f,shareToTimeline:e,shareToWeibo:i,shareToFriend:n,generalShare:a,addContact:o,showOptionMenu:d,hideOptionMenu:r,showToolbar:c,hideToolbar:l,getNetworkType:s,imagePreview:t,closeWindow:u,openInWeixin:h}}();$(function(){function e(){var a=10;0==n?i++:i--,i>18&&(n=1),-18>i&&(n=0,a=500),$("div.page").css("margin-top",i),setTimeout(function(){e()},a)}!function(e,n,i){var a=Math.max($(window).width()/n,$(window).height()/i);$(e).width(a*n).height(a*i)}(".slideMain",640,960);var n=0,i=30;e(),slide.setEles(".slidePage"),slide.preload(1,3);var a=function(e){var n=new Audio,i=!1;for(var a in e)e.hasOwnProperty(a)&&a in n&&(n[a]=e[a]);return{play:function(){i=!0,n.play()},pause:function(){i=!1,n.pause()},toggle:function(){return i?this.pause():this.play(),i}}}({loop:!0,preload:"auto",src:"img/wd.mp3"});$(document).one("touchstart",function(e){"music"==$(e.target).attr("id")?$("#music").removeClass("on"):a.play(),event.preventDefault()}),$(document).on("touchstart",function(){$(".layer_share").removeClass("showShare")}),$(".btnShare").click(function(){$(".layer_share").addClass("showShare")}),$("#music").addClass("on").on("click",function(){$(this).hasClass("on")?a.pause():a.play(),$(this).toggleClass("on")}),$(function(){WeixinApi.ready(function(e){var n={appId:"",imgUrl:"http://wxshare.coding.io/whwanda/1.png",link:location.href,desc:"汉街万达广场开业1周年庆 全武汉，不曾有!",title:"9月27号 一周年庆"},i={ready:function(){},cancel:function(){},fail:function(){},confirm:function(){},all:function(){}};e.shareToFriend(n,i),e.shareToTimeline(n,i),e.shareToWeibo(n,i),e.generalShare(n,i)})})});var slide=function(){var e,n,i,a,o={up:{x:0,y:-1,dir:"up"},down:{x:0,y:1,dir:"down"},left:{x:-1,y:0,dir:"left"},right:{x:1,y:0,dir:"right"},origin:{x:0,y:0,dir:"origin"}},t=function(o){e=i=o.clientX,n=a=o.clientY},d=function(e){i=e.clientX,a=e.clientY,event.preventDefault()},r=function(t){var d=i-e,r=a-n;t(25>d*d+r*r?o.origin:Math.abs(d)>Math.abs(r)?d>0?o.right:o.left:r>0?o.down:o.up)},c={},l=!1;return{handleEvent:function(e){if(!(e.targetTouches.length>1))switch(e.type){case"touchstart":t(e.touches[0]);break;case"touchmove":d(e.touches[0]);break;case"touchend":l||r(this.finSlide)}},finSlide:function(){},slideUp:function(){this.finSlide(o.up)},slideDown:function(){this.finSlide(o.down)},slideLeft:function(){this.finSlide(o.left)},slideRight:function(){this.finSlide(o.right)},pages:function(){return c}(),preload:function(e,n){for(var i={load:function(){}},a=0;n>a;a++)(c["#page"+(100+e+a+"").substr(-2)]||i).load()},lock:function(){l=!0},unlock:function(){l=!1}}}();slide.setEles=function(e){$(e).each(function(e,n){var i=$(n),a="#"+$(n).attr("id");slide.pages[a]={root:slide.pages,index:e,main:i.find(".slideMain"),loaded:!1,onload:function(){},load:function(){return this.loaded||(this.loaded=!0,this.onload(),this.main.parent().addClass("onload")),this}}})},document.addEventListener("touchstart",slide),document.addEventListener("touchmove",slide),document.addEventListener("touchend",slide),$(function(){var e=$(".slidePage"),n=0,i=e.length;slide.finSlide=function(a){if(n-a.y==i&&$(".btnShare").click(),!(n-a.y<0||n-a.y>i-1)){n-=a.y;var o=e.removeClass("out").filter(".in").toggleClass("in out").end().eq(n).addClass("in");o.find(".slideMain").addClass("on"),o.siblings().find(".slideMain").removeClass("on"),slide.preload(n+1,3)}}});